<div class="plans-page">
  <header class="page-hero">
    <h1>Gerencie seus Planos</h1>
    <p class="subtitle">
      Defina os planos que seus alunos poderão contratar, ajuste valores,
      benefícios e torne sua gestão mais simples e organizada.
    </p>
  </header>

  <section class="cards-grid">
    @for (p of plans; track trackByPlan($index, p)) {
      <!-- Placeholder vira "Criar novo plano" -->
      @if (p.isPlaceholder) {
        <button
          class="plan-card create-card"
          (click)="openCreateDialog()"
          >
          <div class="create-icon">
            <mat-icon>add</mat-icon>
          </div>
          <h3>Criar Novo Plano</h3>
          <p>Personalize um plano específico para suas necessidades</p>
        </button>
      } @else {
        <mat-card class="plan-card" [class.emphasized]="p.emphasized">
          @if (p.popular) {
            <div class="badge">Popular</div>
          }
          <div class="icon-wrap">
            <mat-icon>{{ p.icon }}</mat-icon>
          </div>
          <h3 class="plan-name">{{ p.name }}</h3>
          <div class="price">
            <span class="currency">R$</span>
            <span class="amount">{{ p.price | number: '1.2-2' }}</span>
            <span class="period">/{{ periodSuffix(p.period) }}</span>
          </div>
          <ul class="features">
            @for (f of p.features; track f) {
              <li>
                <mat-icon class="check">done</mat-icon> {{ f }}
              </li>
            }
          </ul>
          <!-- Ações do card -->
          <div style="display:flex; gap:10px; margin-top:auto; justify-content:center;">
            <button mat-stroked-button class="choose-btn" (click)="openEditDialog(p)">
              Editar
            </button>
          </div>
        </mat-card>
      }
      <!-- Card normal -->
    }
  </section>

  <div class="sales-cta">
    <p>Precisa de um plano personalizado?</p>
    <button mat-stroked-button (click)="openTalkToTeacher()">Falar com professor</button>
  </div>
</div>
